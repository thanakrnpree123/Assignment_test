(function(t){function a(a){for(var n,i,c=a[0],o=a[1],u=a[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);l&&l(a);while(p.length)p.shift()();return s.push.apply(s,u||[]),e()}function e(){for(var t,a=0;a<s.length;a++){for(var e=s[a],n=!0,c=1;c<e.length;c++){var o=e[c];0!==r[o]&&(n=!1)}n&&(s.splice(a--,1),t=i(i.s=e[0]))}return t}var n={},r={app:0},s=[];function i(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=n,i.d=function(t,a,e){i.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,a){if(1&a&&(t=i(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var n in t)i.d(e,n,function(a){return t[a]}.bind(null,n));return e},i.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=a,c=c.slice();for(var u=0;u<c.length;u++)a(c[u]);var l=o;s.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var n=e("85ec"),r=e.n(n);r.a},"56d7":function(t,a,e){"use strict";e.r(a);var n={};e.r(n),e.d(n,"updateCart",(function(){return ct})),e.d(n,"removeItemInCart",(function(){return ot})),e.d(n,"registerByEmail",(function(){return ut})),e.d(n,"logout",(function(){return lt})),e.d(n,"loginWithEmail",(function(){return dt})),e.d(n,"productList",(function(){return pt})),e.d(n,"saveToOrder",(function(){return mt})),e.d(n,"orderList",(function(){return ft}));e("e260"),e("e6cf"),e("cca6"),e("a79d");var r=e("2b0e"),s=e("8c4f"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},t._l(t.products,(function(t){return e("app-product-item",{key:t.id,attrs:{item:t}})})),1)])},c=[],o=e("5530"),u=e("2f62"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mb-3 col-sm-6 col-md-4 item",class:{"list-group-item":t.displayList}},[e("div",{staticClass:"thumbnail card"},[e("div",{staticClass:"img-event intrinsic"},[e("img",{staticClass:"grow thumbnail-image card-img-top intrinsic-item p-3",attrs:{src:t.item.thumbnail_url,alt:""}})]),e("div",{staticClass:"card-body"},[e("b",[e("a",{staticClass:"card-title",attrs:{tag:"h5"}},[t._v(t._s(t.item.title))])]),e("p",{staticClass:"card-text truncate"},[t._v(t._s(t._f("shortDescription")(t.item.description)))]),e("div",{staticClass:"row"},[e("p",{staticClass:"col-6 lead"},[t._v(t._s(t.item.price)+" บาท")]),e("p",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-info pull-right",attrs:{disabled:0===t.item.quantity},on:{click:t.addItem}},[t._v(" เพิ่มสินค้า ")])])])])])])},d=[],p={props:["item"],methods:Object(o["a"])({},Object(u["b"])(["updateCart"]),{addItem:function(){var t={item:Object.assign({},this.item),quantity:1,isAdd:!0};this.updateCart(t)}}),filters:{shortDescription:function(t){return t&&t.length>100?t.substring(0,100)+"...":t}}},m=p,f=(e("b922"),e("2877")),v=Object(f["a"])(m,l,d,!1,null,"194dd4a4",null),h=v.exports,b={computed:Object(o["a"])({},Object(u["c"])(["products"])),components:{appProductItem:h}},C=b,g=Object(f["a"])(C,i,c,!1,null,null,null),_=g.exports,I=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container table-responsive"},[e("table",{staticClass:"table table-hover table-sm",attrs:{id:"cart"}},[t._m(0),e("transition-group",{attrs:{name:"list-shopping-cart",tag:"tbody"}},t._l(t.cartItemList,(function(t){return e("app-cart-item",{key:t.id,attrs:{cartItem:t}})})),1),e("tfoot",[t._m(1),e("tr",[e("td"),e("td",{staticClass:"d-none d-sm-table-cell",attrs:{colspan:"2"}}),e("td",{staticClass:"d-none d-sm-table-cell text-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.discount,expression:"discount"}],staticClass:"form-control text-center",attrs:{type:"text"},domProps:{value:t.discount},on:{input:function(a){a.target.composing||(t.discount=a.target.value)}}})]),e("td",{staticClass:"px-0"},[e("button",{staticClass:"btn btn-success",on:{click:t.useCode}},[t._m(2)])])]),e("tr",[e("td",[e("button",{staticClass:"btn btn-warning",on:{click:t.saveShoppingCartLocal}},[e("i",{staticClass:"fa fa-angle-left"}),t._v(" กลับไปหน้ารายการสินค้า")])]),e("td",{staticClass:"d-none d-sm-table-cell",attrs:{colspan:"2"}}),e("td",{staticClass:"d-none d-sm-table-cell text-center"},[0==t.total?e("strong",[t._v("ทั้งสิ้น "+t._s(t.cartValue)+" บาท")]):e("strong",[t._v("ทั้งสิ้น "+t._s(t.total.toFixed(2))+" บาท")])]),e("td",{staticClass:"px-0"},[e("button",{staticClass:"btn btn-info",on:{click:t.checkout}},[t._m(3)])])])])],1)])},y=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticStyle:{width:"50%"}},[t._v("สินค้า")]),e("th",{staticStyle:{width:"10%"}},[t._v("ราคา")]),e("th",{staticStyle:{width:"8%"}},[t._v("จำนวน")]),e("th",{staticClass:"text-center",staticStyle:{width:"22%"}},[t._v("ราคา/หน่วย")]),e("th",{staticStyle:{width:"10%"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",{staticClass:"d-table-row d-sm-none"},[e("td",{staticClass:"text-center"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"text-nowrap"},[t._v("ใช้โค้ด "),e("i",{staticClass:"fa fa-angle-right d-inline"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"text-nowrap"},[t._v("ดำเนินการต่อ "),e("i",{staticClass:"fa fa-angle-right d-inline"})])}],O=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",[e("td",{attrs:{"data-th":"Product"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-2 d-none d-sm-block"},[e("img",{staticClass:"img-fluid",attrs:{src:t.cartItem.thumbnail_url,alt:"..."}})]),e("div",{staticClass:"col-sm-10"},[e("h4",{staticClass:"nomargin"},[t._v(t._s(t.cartItem.title))]),e("p",[t._v(t._s(t.cartItem.description))])])])]),e("td",{attrs:{"data-th":"Price"}},[t._v(t._s(t.cartItem.price))]),e("td",{attrs:{"data-th":"Quantity"}},[e("input",{staticClass:"form-control text-center",attrs:{type:"number",min:"0"},domProps:{value:t.cartItem.quantity},on:{input:t.updateQuantity}})]),e("td",{staticClass:"text-center",attrs:{"data-th":"Subtotal"}},[t._v("$"+t._s(t.subtotal))]),e("td",{staticClass:"actions",attrs:{"data-th":""}},[e("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.removeItem}},[e("i",{staticClass:"fa fa-trash-o"})])])])},L=[],T={props:["cartItem"],computed:{subtotal:function(){return this.cartItem.quantity*this.cartItem.price}},methods:Object(o["a"])({},Object(u["b"])(["updateCart","removeItemInCart"]),{removeItem:function(){var t=this;this.removeItemInCart({item:t.cartItem})},updateQuantity:function(t){var a=this;this.updateCart({item:a.cartItem,quantity:parseInt(t.target.value),isAdd:!1})}})},w=T,x=Object(f["a"])(w,O,L,!1,null,null,null),j=x.exports,E={computed:Object(o["a"])({},Object(u["c"])(["cartItemList","products","cartValue"])),components:{appCartItem:j},data:function(){return{total:0}},methods:Object(o["a"])({useCode:function(){"ARTISAN20"==this.discount?this.total=.8*this.cartValue:this.total=this.cartValue}},Object(u["b"])(["saveShoppingCart","saveToOrder","clearCart"]),{saveShoppingCartLocal:function(){this.$router.push("/")},checkout:function(){var t=this;this.cartItemList&&0!=this.cartItemList.length&&this.saveToOrder({cartItemList:this.cartItemList,uid:this.currentUser.uid}).then((function(){t.saveShoppingCart({cartItemList:[],uid:t.currentUser.uid}),t.clearCart(),t.$router.push("/")}))}})},S=E,A=(e("a90e"),Object(f["a"])(S,I,y,!1,null,"97e3ed12",null)),k=A.exports,P=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[t._v(" Your Order! "),t._l(t.items,(function(a){return e("tr",{key:a[".key"]},[e("td",[t._v(t._s(a.description))])])}))],2)])},R=[],U=e("8aa5"),$=e.n(U),q={apiKey:"AIzaSyC6I_sqQsiYZnUtIBTmXow0ao8HJ_T-DTM",authDomain:"shopping-cart-a6cc0.firebaseapp.com",databaseURL:"https://shopping-cart-a6cc0.firebaseio.com",projectId:"shopping-cart-a6cc0"};function D(t){$.a.auth().onAuthStateChanged((function(a){a?t(!0,a):t(!1)}),(function(t){console.log(t)}))}$.a.initializeApp(q);var M=$.a.database().ref(),N=$.a.auth,V={data:function(){return{items:[]}},firebase:{items:M.child("orders")}},H=V,Q=Object(f["a"])(H,P,R,!1,null,null,null),J=Q.exports,W=[{path:"/",component:_,name:"mainpage"},{path:"/cart",component:k,name:"shoppingcart"},{path:"/yourorder",component:J,name:"orders"},{path:"*",redirect:"/"}],z=(e("7db0"),e("c975"),e("d81d"),e("a434"),{cartItemList:[]}),B={UPDATE_CART:function(t,a){var e=a.item,n=a.quantity,r=a.isAdd,s=t.cartItemList.find((function(t){return t.id==e.id}));s?r?s.quantity+=n:s.quantity=n:t.cartItemList.push(Object(o["a"])({},e,{quantity:n}))},SET_CART:function(t,a){a&&(t.cartItemList=a)},REMOVE_CART_ITEM:function(t,a){var e=a.item,n=t.cartItemList.find((function(t){return t.id==e.id}));t.cartItemList.splice(t.cartItemList.indexOf(n),1)}},Y={clearCart:function(t){var a=t.commit;a("SET_CART",[])}},F={cartItemList:function(t){return t.cartItemList},cartValue:function(t){var a=0;return t.cartItemList.map((function(t){a+=t.price*t.quantity})),a}},G={state:z,mutations:B,actions:Y,getters:F},K={productList:[]},X={UPDATE_PRODUCT_LIST:function(t,a){t.productList=a}},Z={},tt={products:function(t){return t.productList}},at={state:K,mutations:X,actions:Z,getters:tt},et={orderList:[]},nt={UPDATE_ORDER_LIST:function(t,a){t.orderList=a}},rt={},st={orders:function(t){return t.orderList}},it={state:et,mutations:nt,actions:rt,getters:st},ct=function(t,a){var e=t.commit,n=a.item,r=a.quantity,s=a.isAdd;e("UPDATE_CART",{item:n,quantity:r,isAdd:s})},ot=function(t,a){var e=t.commit,n=a.item;e("REMOVE_CART_ITEM",{item:n})},ut=function(t,a){var e=a.email,n=a.password;return N().createUserWithEmailAndPassword(e,n)},lt=function(t){var a=t.commit;return a("SET_CART",[]),N().signOut()};function dt(t,a){var e=a.email,n=a.password;return N().signInWithEmailAndPassword(e,n)}function pt(t){var a=t.commit;return M.child("products").on("value",(function(t){a("UPDATE_PRODUCT_LIST",t.val())}))}function mt(t,a){var e=a.cartItemList;M.child("orders").push({cartItemList:e})}function ft(t){var a=t.commit;return M.child("orders").on("value",(function(t){a("UPDATE_ORDER_LIST",t.val())}))}r["a"].use(u["a"]);var vt=new u["a"].Store({actions:n,modules:{cart:G,products:at,order:it}}),ht=(e("a899"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex flex-column sticky-footer-wrapper"},[e("main",{staticClass:"flex-fill"},[e("app-header"),e("message-component"),e("div",{staticClass:"container mt-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("router-view")],1)])])],1)])}),bt=[],Ct=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-dark",attrs:{role:"navigation"}},[e("div",{staticClass:"container"},[e("router-link",{staticClass:"navbar-brand mr-auto",attrs:{to:"/"}},[t._v("Assignment-Online-Shopping")]),e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarTop","aria-controls":"navbarTop","aria-expanded":"false","aria-label":"Toggle navigation"},on:{click:t.toggleNavbar}},[e("span",{staticClass:"navbar-toggler-icon"})]),e("div",{staticClass:"collapse navbar-collapse",class:{show:t.isNavOpen},attrs:{id:"navbarTop"}},[e("ul",{staticClass:"navbar-nav mr-auto"}),e("ul",{staticClass:"nav navbar-nav"},[e("li",{staticClass:"li-pointer nav-item"},[e("router-link",{staticClass:"nav-item",attrs:{to:"/yourorder",tag:"li","active-class":"active"}},[e("a",{staticClass:"nav-link"},[t._v("รายการคำสั่งซื้อของคุณ")])])],1),e("li",[e("router-link",{staticClass:"btn btn-success navbar-btn",attrs:{to:"/cart",tag:"button"}},[t._v(" ชำระเงิน "),e("span",{staticClass:"badge badge-light"},[t._v(t._s(t.count))])])],1)])])],1)])},gt=[],_t=(e("13d5"),{data:function(){return{isNavOpen:!1}},computed:Object(o["a"])({},Object(u["c"])(["cartValue","cartItemList"]),{count:function(){return this.cartItemList.reduce((function(t,a){return t+=a.quantity,t}),0)}}),methods:{toggleNavbar:function(){this.isNavOpen=!this.isNavOpen}}}),It=_t,yt=(e("e835"),Object(f["a"])(It,Ct,gt,!1,null,"30d8b458",null)),Ot=yt.exports,Lt={components:{appHeader:Ot},methods:Object(o["a"])({},Object(u["b"])(["getShoppingCart","productList"])),created:function(){var t=this.$store.getters.currentUser.uid;this.productList(),this.getShoppingCart({uid:t,currentCart:this.$store.getters.cartItemList})}},Tt=Lt,wt=(e("034f"),Object(f["a"])(Tt,ht,bt,!1,null,null,null)),xt=wt.exports;r["a"].use(s["a"]),D(Et);var jt=new s["a"]({mode:"history",routes:W});function Et(t,a){vt&&(vt.commit("AUTH_STATUS_CHANGE"),a&&vt.dispatch("getShoppingCart",{uid:a.uid,currentCart:vt.getters.cartItemList}))}new r["a"]({el:"#app",router:jt,store:vt,render:function(t){return t(xt)}})},"85ec":function(t,a,e){},a899:function(t,a,e){},a90e:function(t,a,e){"use strict";var n=e("ad7a"),r=e.n(n);r.a},ad7a:function(t,a,e){},b922:function(t,a,e){"use strict";var n=e("f895"),r=e.n(n);r.a},c1a1:function(t,a,e){},e835:function(t,a,e){"use strict";var n=e("c1a1"),r=e.n(n);r.a},f895:function(t,a,e){}});
//# sourceMappingURL=app.2a3a003e.js.map